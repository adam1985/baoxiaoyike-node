<!DOCTYPE html>
<html>
  <head>
    <title><%= title %></title>
    <link rel='stylesheet' href='/stylesheets/style.css' />
	<script src="/javascripts/jquery-2.1.1.min.js"></script>
	
  </head>
  <body>
    
	<div class="wrapper">
		<div class="add-item-btn" id="add-item-btn">
			<button>添加</button>
		</div>
		<div class="page-item-box" id="page-item-box">
			<div class="page-item">
				<input type="text" value="" placeholder="请输入微信页面地址" />
			</div>
            <div class="page-item">
                <input type="text" value="" placeholder="请输入微信页面地址" />
            </div>
            <div class="page-item">
                <input type="text" value="" placeholder="请输入微信页面地址" />
            </div>
            <div class="page-item">
                <input type="text" value="" placeholder="请输入微信页面地址" />
            </div>
            <div class="page-item">
                <input type="text" value="" placeholder="请输入微信页面地址" />
            </div>
		</div>
		<div class="post-page">
			<input type="button" id="post-page-btn" value="提交"  />
		</div>
	</div>
	
	<script>
		jQuery(function($){
			var addItemBtn = $('#add-item-btn'), 
			pageBox = $('#page-item-box'), 
			pageItemTemp = '<div class="page-item"><input type="text" placeholder="请输入微信页面地址" value=""></div>'; 
			addItemBtn.click(function(){
				pageBox.append(pageItemTemp);
				
			});
			
			$('#post-page-btn').on('click', function(){
				var pagelinks = pageBox.find('.page-item input'), data = [];
				pagelinks.each(function(){
					if(this.value ){
						data.push( this.value );
					}
				});
				
				$.ajax({
					url : '/fetch',
					dataType : 'json',
					type : 'post',
					data : {
						urls : JSON.stringify(data)
					},
					success : function( data ){
						if( data.success ) {
                            alert('抓取成功!');
                        }
					}
				})
			});
			
		});
	</script>
  </body>
</html>